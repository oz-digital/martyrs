{
  "path": "../../src/modules/products/components/sections/EditCategories.vue",
  "relativePath": "modules/products/components/sections/EditCategories.vue",
  "type": "source",
  "name": "EditCategories.vue",
  "extension": ".vue",
  "analysis": {
    "Summary": "EditCategories.vue provides a UI block for selecting and editing product categories. It renders a multi‐select dropdown of available categories, displays suggested categories, and keeps the selected IDs in sync with the parent via v-model.",
    "Purpose": "Allow users to add or remove categories on a product edit page by selecting from a searchable multi‐select list and quick‐add suggestions.",
    "Components": [
      {
        "name": "Block",
        "responsibility": "Layout wrapper that displays a titled section and placeholder when no content is present."
      },
      {
        "name": "SelectMulti",
        "responsibility": "Searchable, taggable multi‐select dropdown used to choose categories."
      }
    ],
    "Functions": [
      {
        "name": "buildCategoryMap",
        "description": "Builds a lookup map of category ID to category object.",
        "parameters": []
      },
      {
        "name": "getCategoryPath",
        "description": "Constructs the full hierarchical path string of a category (e.g., “Electronics › Phones › Smartphones”).",
        "parameters": [
          {
            "name": "category",
            "type": "Object",
            "description": "Category object with at least _id, name, parent"
          }
        ]
      },
      {
        "name": "getCategoryLabel",
        "description": "Returns the display label for a category in the select dropdown.",
        "parameters": [
          {
            "name": "category",
            "type": "Object",
            "description": "Category object"
          }
        ]
      },
      {
        "name": "handleSelectionChanged",
        "description": "Emits updated array of selected category IDs when the multi-select value changes.",
        "parameters": [
          {
            "name": "newSelection",
            "type": "Array<Object>",
            "description": "Array of selected category objects"
          }
        ]
      },
      {
        "name": "addCategory",
        "description": "Adds a clicked suggested category to the selection and emits the change.",
        "parameters": [
          {
            "name": "category",
            "type": "Object",
            "description": "Category object to add"
          }
        ]
      }
    ],
    "Dependencies": [
      "vue (ref, computed, watch)",
      "@martyrs/src/components/Block/Block.vue",
      "@martyrs/src/components/SelectMulti/SelectMulti.vue"
    ],
    "Usage": "Imported into a product edit or creation form. Bound via v-model for `modelValue` (array of IDs) and passed a flat `categories` prop. Listens to `update:modelValue` to keep parent state in sync.",
    "Importance": 3,
    "Notes": [
      "Uses an internal categoryMap for fast lookups in watchers.",
      "Suggested categories logic is simplistic (first N available); can be extended for relevance.",
      "Watchers use `{ immediate: true }` to initialize state on mount.",
      "Handles both object-level UI (`selectedCategories`) and ID-level parent binding (`modelValue`).",
      "getCategoryPath will safely stop if parent chain is broken or missing."
    ]
  }
}