{
  "path": "../../src/modules/products/routes/categories.routes.js",
  "relativePath": "modules/products/routes/categories.routes.js",
  "type": "source",
  "name": "categories.routes.js",
  "extension": ".js",
  "analysis": {
    "Summary": "Этот файл определяет и регистрирует HTTP-маршруты для работы с категориями (CRUD и изменение порядка) в Express-приложении, подключая аутентификацию, валидацию и ABAC-политику.",
    "Purpose": "Обеспечить централизованную регистрацию REST API маршрутов для сущности «категория», используя JWT-аутентификацию, проверку запросов и ABAC-контроль доступа.",
    "Components": [
      {
        "name": "jwt",
        "responsibility": "Middleware для проверки JWT-токена и наличия прав на выполнение операций."
      },
      {
        "name": "verifier",
        "responsibility": "Набор middleware-функций для валидации тела и параметров запросов, загрузки данных категории перед обновлением или удалением."
      },
      {
        "name": "abac",
        "responsibility": "Middleware на основе политики ABAC для проверки прав доступа к операциям над сущностью «category»."
      },
      {
        "name": "controller",
        "responsibility": "Контроллер с методами для чтения, создания, обновления, удаления и изменения порядка категорий."
      }
    ],
    "Functions": [
      {
        "name": "default export (function)",
        "purpose": "Регистрирует маршруты API для работы с категориями на переданном объекте Express-приложения.",
        "parameters": [
          {
            "name": "app",
            "type": "Express",
            "description": "Экземпляр Express.js приложения"
          },
          {
            "name": "db",
            "type": "any",
            "description": "Объект подключения к базе данных (контекст для factories и ABAC)"
          }
        ]
      },
      {
        "name": "controllerFactory",
        "purpose": "Фабрика для создания экземпляра контроллера категорий, связанного с конкретным подключением к базе данных.",
        "parameters": [
          {
            "name": "db",
            "type": "any",
            "description": "Контекст БД для контроллера"
          }
        ]
      }
    ],
    "Dependencies": [
      "@martyrs/src/modules/auth/controllers/middlewares/authJwt.js",
      "@martyrs/src/modules/globals/controllers/classes/globals.abac.js",
      "../controllers/categories.controller.js",
      "../middlewares/categories.verifier.js"
    ],
    "Usage": "Импортируется в точке инициализации маршрутов (например, в основном файле конфигурации Express) и вызывается с параметрами (app, db) для подключения маршрутов.",
    "Importance": 4,
    "Notes": [
      "Все маршруты защищены JWT-мидлварой и ABAC-политиками для операций create, edit, delete.",
      "Порядок middleware критичен: сначала аутентификация, затем валидация запроса, потом ABAC, и только потом бизнес-логика контроллера.",
      "Экспорт controllerFactory позволяет переиспользовать контроллер в тестах или других модулях без регистрации маршрутов."
    ]
  }
}