{
  "path": "../../src/modules/globals/views/components/layouts/Client.vue",
  "relativePath": "modules/globals/views/components/layouts/Client.vue",
  "type": "source",
  "name": "Client.vue",
  "extension": ".vue",
  "analysis": {
    "Summary": "Client.vue defines the main application layout for the client side of the project. It wraps all pages in a common structure: handles global loader, header, navigation bars, sidebars, page content via <router-view>, footers, popups and status messages, and manages scroll, loading and first-use walkthrough logic.",
    "Purpose": "Provide a top-level layout component that orchestrates the global UI shell based on route metadata, application environment (web vs mobile), and global state.",
    "Components": [
      {
        "name": "Loader",
        "responsibility": "Displays a full-screen loading indicator while the page is loading or initial data is being fetched."
      },
      {
        "name": "Popup",
        "responsibility": "Generic popup container used here for location selection."
      },
      {
        "name": "LocationSelection",
        "responsibility": "Renders UI for choosing user location inside a popup."
      },
      {
        "name": "Status",
        "responsibility": "Shows global error messages and allows dismissing them."
      },
      {
        "name": "ShopCart",
        "responsibility": "Renders the shopping cart component on the side of the screen."
      },
      {
        "name": "router-view (default)",
        "responsibility": "Renders the matched page component inside a <Suspense> to support async setup and transitions."
      },
      {
        "name": "router-view (defaultBottom)",
        "responsibility": "Optional named view slot for components to render below the main screen (e.g. persistent bottom bar)."
      },
      {
        "name": "Dynamic route.meta components",
        "responsibility": "Renders header, footer, sidebar, navigation bar or walkthrough based on route.meta configuration."
      }
    ],
    "Functions": [
      {
        "name": "handlePageLoading",
        "description": "Sets isPageLoading to true when the child page emits a loading event.",
        "params": []
      },
      {
        "name": "handlePageLoaded",
        "description": "Sets isPageLoading to false when the child page emits a loaded event.",
        "params": []
      },
      {
        "name": "onSuspenseResolved",
        "description": "Fallback handler called when Suspense resolves, can disable loader if child component does not emit loaded event.",
        "params": []
      },
      {
        "name": "handleScroll",
        "description": "Updates scrollOffset state based on the scrollTop of the main content section.",
        "params": []
      },
      {
        "name": "closeLocationPopup",
        "description": "Closes the location selection popup by updating global state.",
        "params": []
      },
      {
        "name": "scrollTop",
        "description": "Scrolls the whole application container to the top.",
        "params": []
      },
      {
        "name": "getFirstUse",
        "description": "Asynchronously reads a 'first-use' flag from Capacitor Preferences to determine if the walkthrough should show.",
        "params": []
      },
      {
        "name": "updateFirstUse",
        "description": "Updates the FirstUse ref when the walkthrough component emits an update.",
        "params": [
          "value"
        ]
      }
    ],
    "Dependencies": [
      "vue (computed, ref, onMounted, watch, defineProps)",
      "vue-router (useRoute)",
      "@martyrs/src/modules/globals/views/store/globals.js",
      "@martyrs/src/components/Status/Status.vue",
      "@martyrs/src/components/Popup/Popup.vue",
      "@martyrs/src/components/Loader/Loader.vue",
      "@martyrs/src/modules/globals/views/components/partials/NavigationBar.vue",
      "@martyrs/src/modules/globals/views/components/partials/LocationSelection.vue",
      "@martyrs/src/modules/orders/components/partials/ShopCart.vue",
      "@capacitor/preferences (Preferences)"
    ],
    "Usage": "Imported as the applicationâ€™s root layout in the router configuration or in App.vue. Routes specify metadata (header, sidebar, footer, navigation components, walkthrough) that this layout dynamically renders. It wraps <router-view> so that all pages share the same global UI scaffolding.",
    "Importance": 5,
    "Notes": [
      "Uses route.meta extensively to decide which components (header, sidebar, footer, walkthrough) to render.",
      "Distinguishes between web and mobile (MOBILE_APP === 'ios') to apply different classes and render mobile navigation bars.",
      "Implements a first-use walkthrough via Capacitor Preferences, showing slides only on first app open.",
      "Loads child page components inside a <Suspense> with a fallback loader and transition animations.",
      "Global state (sidebar open, location popup, error) is managed via an external store module.",
      "Scroll offset driven computed 'headerTheme' but currently always returns the same value; logic can be extended.",
      "Service worker registration is commented out but scaffolded for potential PWA support."
    ]
  }
}