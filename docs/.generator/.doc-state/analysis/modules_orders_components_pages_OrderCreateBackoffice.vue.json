{
  "path": "../../src/modules/orders/components/pages/OrderCreateBackoffice.vue",
  "relativePath": "modules/orders/components/pages/OrderCreateBackoffice.vue",
  "type": "source",
  "name": "OrderCreateBackoffice.vue",
  "extension": ".vue",
  "analysis": {
    "Summary": "Vue Single-File Component providing a back-office page to create a new order. It renders a multi-step form with tabs for positions, customer, delivery and payment, manages popups for selecting products and customers, computes total price, and submits the order via the store.",
    "Purpose": "Acts as the UI and orchestration layer for back-office users to build and submit a new order. It initializes/reset order state, collects all necessary data (items, customer, delivery, payment), and triggers creation in the orders store.",
    "Components": [
      {
        "name": "Button",
        "responsibilities": "Renders a styled button that can trigger form submission and redirect callback."
      },
      {
        "name": "Tab",
        "responsibilities": "Displays navigation tabs and binds the current step of the order creation workflow."
      },
      {
        "name": "Popup",
        "responsibilities": "Generic overlay used for selecting products and adding customers."
      },
      {
        "name": "Feed",
        "responsibilities": "Scroll-able, searchable list that pulls items from a store (products or customers)."
      },
      {
        "name": "Block",
        "responsibilities": "Generic content container with optional header title and actions."
      },
      {
        "name": "CardOrderItem",
        "responsibilities": "Displays an order line item with controls for edit, increase, decrease, remove, and rent-date update."
      },
      {
        "name": "CardUser",
        "responsibilities": "Renders a user/customer summary card with click handler."
      },
      {
        "name": "FormAddCustomer",
        "responsibilities": "Form inside customer-add popup to create a new customer."
      },
      {
        "name": "FormDelivery",
        "responsibilities": "Section component for entering delivery details."
      },
      {
        "name": "FormPayment",
        "responsibilities": "Section component for entering payment details."
      }
    ],
    "Functions": [
      {
        "name": "openProductsPopup",
        "description": "Opens the product selection popup.",
        "parameters": []
      },
      {
        "name": "closeProductsPopup",
        "description": "Closes the product selection popup.",
        "parameters": []
      },
      {
        "name": "openCustomerPopup",
        "description": "Opens the add-customer popup.",
        "parameters": []
      },
      {
        "name": "closeCustomerPopup",
        "description": "Closes the add-customer popup.",
        "parameters": []
      },
      {
        "name": "onSubmit",
        "description": "Gathers final order data (creator, owner, customer), then calls orders.actions.create to persist the order.",
        "parameters": []
      },
      {
        "name": "redirectTo",
        "description": "Navigates to the order-edit page after successful creation, choosing backoffice or organization context based on route metadata.",
        "parameters": []
      }
    ],
    "Dependencies": [
      "vue (computed, ref, reactive, onMounted)",
      "vue-router (useRoute, useRouter)",
      "@martyrs/src/components/Field/Field.vue",
      "@martyrs/src/components/Button/Button.vue",
      "@martyrs/src/components/Tab/Tab.vue",
      "@martyrs/src/components/Popup/Popup.vue",
      "@martyrs/src/components/Block/Block.vue",
      "@martyrs/src/components/Feed/Feed.vue",
      "@martyrs/src/modules/orders/components/blocks/CardOrderItem.vue",
      "@martyrs/src/modules/products/components/blocks/CardPosition.vue",
      "@martyrs/src/modules/auth/views/components/blocks/CardUser.vue",
      "@martyrs/src/modules/globals/views/components/blocks/BlockSearch.vue",
      "@martyrs/src/modules/orders/components/sections/FormAddCustomer.vue",
      "@martyrs/src/modules/orders/components/sections/FormDelivery.vue",
      "@martyrs/src/modules/orders/components/sections/FormPayment.vue",
      "@martyrs/src/modules/globals/views/store/globals.js",
      "@martyrs/src/modules/auth/views/store/auth.js",
      "@martyrs/src/modules/orders/store/orders.js",
      "@martyrs/src/modules/organizations/store/organizations.js",
      "@martyrs/src/modules/products/store/products.js",
      "@martyrs/src/modules/orders/store/customers.store.js"
    ],
    "Usage": "Registered as a route component in the back-office router. Imported automatically by the framework when navigating to the order creation path (e.g. 'BackofficeOrderCreate'). Other components donâ€™t import it directly.",
    "Importance": 4,
    "Notes": [
      "Resets the current order state on mount by calling orders.mutations.resetOrder.",
      "Uses Composition API (setup script) with reactive refs and computed for total price.",
      "Conditional rendering of tabs and popups to guide the multi-step workflow.",
      "Total price is recalculated reactively whenever positions change.",
      "On creation, redirects based on route.meta.context for backoffice vs organization views."
    ]
  }
}