{
  "path": "../../src/builder/vite/vite.config.base.js",
  "relativePath": "builder/vite/vite.config.base.js",
  "type": "source",
  "name": "vite.config.base.js",
  "extension": ".js",
  "analysis": {
    "Summary": "This file defines the base Vite configuration for a \"martyrs\"-based Vue project. It loads environment variables, sets up module resolution aliases, configures plugins (including Vue support and optional bundle analysis), CSS preprocessing, build output naming, global compile-time defines, logging, asset handling, and experimental URL rendering rules.",
    "Purpose": "Provide a centralized, reusable Vite config generator that other configuration files or scripts can import and extend for different build modes or environments.",
    "Components": [
      {
        "name": "loadEnv",
        "role": "Helper function that reads a .env.{mode} file and injects its variables into process.env"
      },
      {
        "name": "default export (config factory)",
        "role": "Function that accepts projectRoot and returns the full Vite configuration object"
      }
    ],
    "Functions": [
      {
        "name": "loadEnv",
        "purpose": "Load and parse environment variables for a given mode",
        "parameters": [
          "mode (string)"
        ]
      },
      {
        "name": "default export (projectRoot)",
        "purpose": "Produce Vite config object customized for the given project root and current NODE_ENV",
        "parameters": [
          "projectRoot (string)"
        ]
      },
      {
        "name": "configResolved (bundle-analyzer plugin hook)",
        "purpose": "On Vite config resolution, dynamically add rollup-plugin-visualizer for bundle analysis",
        "parameters": [
          "config (ResolvedConfig)"
        ]
      }
    ],
    "Dependencies": [
      "@vitejs/plugin-vue",
      "dotenv",
      "fs (node)",
      "path (node)",
      "rollup-plugin-visualizer"
    ],
    "Usage": "Imported by higher-level Vite config files (e.g., vite.config.js) or build scripts, passing the project root path to generate the baseline Vite config before extending or merging with mode-specific settings.",
    "Importance": 4,
    "Notes": [
      "Environment files are named .env.development, .env.production, etc., and loaded at runtime.",
      "The Vue plugin is configured with an empty compilerOptions placeholder for future tweaks.",
      "Bundle analysis is gated on the BUNDLE_ANALYZER env flag to avoid shipping the visualizer in CI or production by default.",
      "Hash-based file naming and automatic CSS extraction are set for production builds.",
      "Global defines toggle Vue runtime features and detect a SPA mobile mode via process.env.MODE.",
      "Experimental renderBuiltUrl forces relative URLs for all assets, with a special comment on font handling."
    ]
  }
}