{
  "path": "../../src/modules/products/components/pages/Categories.vue",
  "relativePath": "modules/products/components/pages/Categories.vue",
  "type": "source",
  "name": "Categories.vue",
  "extension": ".vue",
  "analysis": {
    "summary": "Vue single-file component that renders and manages a hierarchical list of product categories. It provides UI elements for viewing, adding, reordering and deleting categories.",
    "purpose": "Serves as the categories page in the products module. It fetches category data, displays it in a tree structure, and allows the user to add new categories or modify the order and delete existing ones.",
    "components": [
      {
        "name": "Block",
        "responsibility": "Layout wrapper that applies common spacing, background and flex styles."
      },
      {
        "name": "Feed",
        "responsibility": "Fetches and renders a paginated or infinite‐scroll list; here used to load category data via the store, apply sorting and display empty-state messages."
      },
      {
        "name": "Tree",
        "responsibility": "Renders hierarchical data with drag-and-drop or ordered list support, emits update events when the order changes."
      },
      {
        "name": "CardCategory",
        "responsibility": "Displays a single category card with actions (e.g., delete)."
      },
      {
        "name": "IconPlus",
        "responsibility": "Plus icon used in the navigation bar to trigger adding a new category."
      },
      {
        "name": "router-link",
        "responsibility": "Vue Router component for navigation to the 'Category Add' route."
      }
    ],
    "functions": [
      {
        "name": "flattenCategoryTree",
        "description": "Recursively transforms a nested category tree into a flat array, stripping out the `children` property.",
        "parameters": [
          {
            "name": "categories",
            "type": "Array",
            "description": "Array of category objects, each optionally containing a `children` array."
          }
        ]
      },
      {
        "name": "updateCategoriesOrder",
        "description": "Handles reorder events from the Tree component. Flattens the current state tree and dispatches an updateOrder action to persist the new order.",
        "parameters": [
          {
            "name": "updatedCategories",
            "type": "Array",
            "description": "Newly ordered categories (not actually used directly, full state is flattened instead)."
          }
        ]
      },
      {
        "name": "deleteCategory",
        "description": "Prompts the user for confirmation and if confirmed, calls the delete action on the categories store with the category's URL.",
        "parameters": [
          {
            "name": "category",
            "type": "Object",
            "description": "Category object to delete, must contain at least `name` and `url` properties."
          }
        ]
      }
    ],
    "dependencies": [
      "vue (onMounted, onUnmounted, ref, reactive)",
      "vue-router (useRoute, useRouter, router-link)",
      "@martyrs/src/modules/globals/views/store/globals.js",
      "@martyrs/src/modules/auth/views/store/auth.js",
      "@martyrs/src/modules/products/store/categories.js",
      "@martyrs/src/components/Block/Block.vue",
      "@martyrs/src/components/Feed/Feed.vue",
      "@martyrs/src/components/Tree/Tree.vue",
      "@martyrs/src/modules/products/components/blocks/CardCategory.vue",
      "@martyrs/src/modules/icons/navigation/IconPlus.vue"
    ],
    "usage": "Mapped to a route in the products module router. Imported and rendered when navigating to the categories listing page; it binds to the global navigation bar actions and to the categories Vuex‐style store.",
    "importance": 4,
    "notes": [
      "Sets a global navigation bar action on mount and clears it on unmount.",
      "The onMounted hook is currently empty and can be used for additional initialization.",
      "The style block is empty (no component-specific styles).",
      "Alerts and console logs are used for debugging reorder; should be replaced by proper UI notifications."
    ]
  }
}