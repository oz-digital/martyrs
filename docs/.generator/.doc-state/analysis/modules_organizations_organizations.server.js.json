{
  "path": "../../src/modules/organizations/organizations.server.js",
  "relativePath": "modules/organizations/organizations.server.js",
  "type": "source",
  "name": "organizations.server.js",
  "extension": ".js",
  "analysis": {
    "Summary": "Этот файл инициализирует модуль организаций: регистрирует модели в объекте базы данных, настраивает политики ABAC и подключает маршруты для работы с организациями, отделами, приглашениями и членствами.",
    "Purpose": "Организовать инициализировать серверную часть функционала «Организации» в проекте на фреймворке martyrs: модели, политики, контроллеры и маршруты.",
    "Components": [
      {
        "name": "DepartmentsController",
        "responsibility": "Логика обработки запросов, связанных с отделами (CRUD-операции)."
      },
      {
        "name": "OrganizationsController",
        "responsibility": "Логика обработки запросов, связанных с организациями (CRUD-операции)."
      },
      {
        "name": "MembershipsController",
        "responsibility": "Логика обработки запросов, связанных с членствами пользователей в организациях."
      },
      {
        "name": "InvitesController",
        "responsibility": "Логика обработки запросов, связанных с приглашениями в организацию."
      }
    ],
    "Functions": [
      {
        "name": "initializeOrganization",
        "description": "Инициализирует модуль организаций: регистрирует модели в объекте базы данных, настраивает ABAC-политику и подключает маршруты.",
        "parameters": [
          {
            "name": "app",
            "type": "ExpressApp|null",
            "description": "Экземпляр Express-приложения или null, если нужен только экспорт моделей/контроллеров."
          },
          {
            "name": "db",
            "type": "Object",
            "description": "Объект для хранения и передачи sequelize-моделей и ABAC-инстанса."
          },
          {
            "name": "origins",
            "type": "Array<string>",
            "description": "Список разрешённых CORS-источников."
          },
          {
            "name": "publicPath",
            "type": "string",
            "description": "Путь к публичной директории (для возможной раздачи статики)."
          }
        ]
      }
    ],
    "Dependencies": [
      "@martyrs/src/modules/globals/controllers/classes/globals.abac.js",
      "./controllers/departments.controller.js",
      "./controllers/invites.controller.js",
      "./controllers/memberships.controller.js",
      "./controllers/organizations.controller.js",
      "./models/department.model.js",
      "./models/invite.model.js",
      "./models/membership.model.js",
      "./models/organization.model.js",
      "./policies/organizations.policies.js",
      "./routes/departments.routes.js",
      "./routes/invites.routes.js",
      "./routes/memberships.routes.js",
      "./routes/organizations.routes.js"
    ],
    "Usage": "Импортируется в точке старта сервера или в родительском модуле, вызывается метод initialize(app, db, origins, publicPath) для подключения функционала организаций. Также предоставляет доступ к набору моделей, контроллеров и маршрутов через именованные экспорты.",
    "Importance": 4,
    "Notes": [
      "Использует ABAC-инстанс из глобального модуля для настройки fine-grained политик доступа.",
      "Модели прикрепляются напрямую к объекту db для общего доступа.",
      "Маршруты регистрируются только при передаче экземпляра приложения (app).",
      "Экспортирует как именованные, так и default-объект для гибкой интеграции."
    ]
  }
}