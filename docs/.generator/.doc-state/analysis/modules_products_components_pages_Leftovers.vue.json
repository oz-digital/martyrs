{
  "path": "../../src/modules/products/components/pages/Leftovers.vue",
  "relativePath": "modules/products/components/pages/Leftovers.vue",
  "type": "source",
  "name": "Leftovers.vue",
  "extension": ".vue",
  "analysis": {
    "Summary": "Vue-компонент для отображения и управления списком \"остатков\" (Leftovers) в табличном виде с возможностью фильтрации, сортировки и выполнения операций над элементами (аудит, история, настройка оповещений и колонок).",
    "Purpose": "Обеспечивает интерфейс для просмотра остатков продуктов в организации, позволяет добавлять записи об остатках, проводить аудит, настраивать автоматический перезаказ, просматривать историю и настраивать видимые колонки.",
    "Components": [
      {
        "name": "Feed",
        "role": "Обёртка для загрузки, фильтрации, сортировки и отображения списка элементов."
      },
      {
        "name": "Table",
        "role": "Отрисовка табличного вида данных с настраиваемыми колонками и ячейками."
      },
      {
        "name": "PlaceholderImage",
        "role": "Плейсхолдер для отсутствующей картинки."
      },
      {
        "name": "Dropdown",
        "role": "Выпадающее меню для дополнительных действий над элементом."
      },
      {
        "name": "Popup",
        "role": "Модальный диалог для форм и просмотра деталей."
      },
      {
        "name": "IconSettings",
        "role": "Иконка кнопки настроек вида колонок."
      },
      {
        "name": "IconEllipsis",
        "role": "Иконка для вызова контекстного меню действий над строкой."
      },
      {
        "name": "StockAuditForm",
        "role": "Форма проведения аудита остатков по выбранному продукту."
      },
      {
        "name": "ReorderSettingsForm",
        "role": "Форма установки порога автоматического перезаказа."
      },
      {
        "name": "StockHistoryView",
        "role": "Просмотр истории изменений остатков по продукту."
      },
      {
        "name": "ColumnSettingsMenu",
        "role": "Меню настройки видимости колонок таблицы."
      }
    ],
    "Functions": [
      {
        "name": "openStockAudit",
        "description": "Открывает модальное окно аудита остатков и устанавливает выбранный продукт.",
        "parameters": [
          "row"
        ]
      },
      {
        "name": "openReorderSettings",
        "description": "Открывает модальное окно настроек перезаказа и устанавливает выбранный продукт (или null).",
        "parameters": [
          "row = null"
        ]
      },
      {
        "name": "openStockHistory",
        "description": "Открывает модальное окно просмотра истории остатков и устанавливает выбранный продукт.",
        "parameters": [
          "row"
        ]
      },
      {
        "name": "openViewSettings",
        "description": "Открывает модальное окно настроек видимости колонок.",
        "parameters": []
      },
      {
        "name": "handleAuditSave",
        "description": "Сохраняет результат аудита в стор leftovers, закрывает модалку.",
        "parameters": [
          "audit"
        ]
      },
      {
        "name": "handleReorderSave",
        "description": "Обрабатывает сохранение настроек автоматического перезаказа (выводит alert), закрывает модалку.",
        "parameters": [
          "settings"
        ]
      },
      {
        "name": "handleColumnsUpdate",
        "description": "Обновляет настройки колонок в сторе leftovers и закрывает модалку.",
        "parameters": [
          "updated"
        ]
      }
    ],
    "Dependencies": [
      "vue (ref, reactive)",
      "vue-router (useRoute, useRouter)",
      "@martyrs/src/components/Table/Table.vue",
      "@martyrs/src/components/Feed/Feed.vue",
      "@martyrs/src/components/Dropdown/Dropdown.vue",
      "@martyrs/src/components/Popup/Popup.vue",
      "@martyrs/src/modules/icons/placeholders/PlaceholderImage.vue",
      "@martyrs/src/modules/icons/entities/IconSettings.vue",
      "@martyrs/src/modules/icons/navigation/IconEllipsis.vue",
      "@martyrs/src/modules/products/store/products.js",
      "@martyrs/src/modules/products/store/leftovers.js",
      "../forms/StockAuditForm.vue",
      "../forms/ReorderSettingsForm.vue",
      "../forms/StockHistoryView.vue",
      "../forms/ColumnSettingsMenu.vue"
    ],
    "Usage": "Импортируется как страница в конфигурации роутера (например, под именем 'Leftovers'), вызывается при переходе на маршрут списка остатков; кнопка в header через router.push({ name: 'LeftoverAdd' }) перенаправляет на форму добавления.",
    "Importance": 4,
    "Notes": [
      "Использует динамическую подгрузку картинок через FILE_SERVER_URL с fallback на PlaceholderImage.",
      "Цвет и ширина индикатора доступных остатков рассчитываются на основе порога alert и текущего количества.",
      "Колонки таблицы настраиваются пользователем и сохраняются в store leftovers.",
      "Обработчик handleAuditSave оборачивает запрос в try/catch и логирует ошибки в консоль.",
      "В style присутствует лишь одно правило для класса .bg-orange."
    ]
  }
}