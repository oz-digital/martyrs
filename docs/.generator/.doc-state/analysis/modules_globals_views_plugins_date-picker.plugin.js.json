{
  "path": "../../src/modules/globals/views/plugins/date-picker.plugin.js",
  "relativePath": "modules/globals/views/plugins/date-picker.plugin.js",
  "type": "source",
  "name": "date-picker.plugin.js",
  "extension": ".js",
  "analysis": {
    "Summary": "Этот файл реализует Vue-плагин для отображения глобального всплывающего выбора дат (PopupDateSelector) с возможностью управления через promise-API.",
    "Purpose": "Обеспечить единый метод showDateSelector, доступный в любом компоненте через this.$dateSelector, для открытия модального окна выбора дат с кастомными опциями и возвратом результата через Promise.",
    "Components": [
      {
        "name": "DateSelectorHost",
        "responsibilities": "Реактивный хост-компонент, который встраивает PopupDateSelector в DOM при открытии и передаёт ему параметры и колбэки (confirm/cancel)."
      }
    ],
    "Functions": [
      {
        "name": "showDateSelector",
        "purpose": "Открыть окно выбора дат для переданного продукта и опций, вернуть Promise, который разрешится датами или отклонится при отмене.",
        "parameters": [
          "product – объект продукта (передаётся в PopupDateSelector)",
          "customOptions – опции отображения (showFees, feesRate, showVat, vatRate)"
        ]
      },
      {
        "name": "getDefaultOptions",
        "purpose": "Собрать базовые опции отображения (fees/vat) из глобального стора.",
        "parameters": []
      },
      {
        "name": "confirmSelection",
        "purpose": "Закрыть селектор, разрешить внутренний Promise с выбранными датами и очистить колбэки.",
        "parameters": [
          "dates – данные выбранных дат"
        ]
      },
      {
        "name": "cancelSelection",
        "purpose": "Закрыть селектор, отклонить внутренний Promise с ошибкой и очистить колбэки.",
        "parameters": []
      }
    ],
    "Dependencies": [
      "vue (reactive, markRaw, defineComponent, h, render)",
      "@martyrs/src/modules/globals/views/components/blocks/PopupDateSelector.vue",
      "@martyrs/src/modules/globals/views/store/globals.js"
    ],
    "Usage": "В основном файле приложения: import datePickerPlugin из '.../date-picker.plugin.js'; app.use(datePickerPlugin). После этого в любом компоненте можно вызвать this.$dateSelector(product, options).",
    "Importance": 3,
    "Notes": [
      "Использует markRaw для хранения объекта product без реактивной обёртки.",
      "При инсталляции создаёт div#date-selector-host в body и рендерит туда DateSelectorHost через render().",
      "vnode.appContext = app._context гарантирует доступ к глобальным провайдерам и свойствам приложения.",
      "Состояние (state) выступает синглтоном и хранит колбэки resolve/reject для единственного открытого селектора."
    ]
  }
}